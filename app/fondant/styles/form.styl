/***** Functions *****/
input-before-colorful(state)
  &:before
    background-color: state['bg-color']
    border-color: state['border-color']
input-colorful(state)
  background-color: state['bg-color']
  border-color: state['border-color']
  &:focus:not([readonly])
    box-shadow: 0 0 .1em .1em rgba(state['border-color'], .4)
switch-colorful(state)
  background-color: state['color']
  border-color: state['border-color']
  > *
  > *:after
    color: state['invert-color']
slider-colorful(state)
  box-shadow: inset 0 0 .1em .1em rgba(state['border-color'], .8)
  > *:before
    background-color: state['invert-color']
    border-color: state['border-color']
group-colorful(state)
  >
    *
      background-color: state['bg-color']
      border-color: state['border-color']
    input
      text-color(state)
      &:focus:not([readonly])
        box-shadow: 0 0 .1em .1em rgba(state['border-color'], .4)

/***** Styles *****/
// base styles
form
fieldset
textarea
input:not([type="button"])
select
  +fd()
    outline none
    box-sizing border-box

// reset fieldset
fieldset
  +fd()
    clear both
    margin-bottom 1em
    border none
    padding 0
    margin .4em 0
    -webkit-margin-start 0
    -webkit-margin-end 0
    -webkit-padding-before 0
    -webkit-padding-start 0
    -webkit-padding-end 0
    -webkit-padding-after 0
    legend
      font-size .8rem
      padding 0
      text-shadow 1px 1px 0 rgba(dark-black, .3)
      -webkit-padding-start 0
      -webkit-padding-end 0
      &.divider
      &.hr
        margin 0 auto
        min-width 100%

// text fields
select
textarea
input[type="text"]
input[type="number"]
input[type="password"]
input[type="email"]
input[type="search"]
input[type="url"]
input[type="tel"]
input[type="time"]
input[type="date"]
input[type="datetime"]
input[type="datetime-local"]
input[type="week"]
input[type="month"]
  +fd()
    margin 0
    padding .3em .4em
    height 2em
    background-color base-white
    border 1px solid rgba(dark-black, .15)
    border-radius .2rem
    color rgba(dark-black, .7)
    font-size 1em
    transition all 0.2s linear 0s
    colorful(input-colorful)

select
textarea
input:not([type="button"]):not([type="radio"]):not([type="checkbox"]):not([type="file"])
  +fd()
    widths()

// input fieldset disabled
input[disabled]
fieldset[disabled]
select[disabled]
  +fd()
    cursor not-allowed
    background-color dark-gray
    opacity 1

input[readonly]
  +fd()
    cursor default

// base radio and checkbox 
input[type="radio"]
input[type="checkbox"]
label
  +fd()
    margin 0
    vertical-align middle
    cursor pointer
label
  +fd()
    display inline-block

// label > input
label
  +fd()
    > input[type="radio"]
    > input[type="checkbox"]
      @extend input[type="checkbox"].fd
      margin -.1em 0 0 0
    sizes(\&, ' input[type="radio"]')
    sizes(\&, ' input[type="checkbox"]')

// file
input[type="file"]
  +fd()
    display block

// textarea
textarea
  +fd()
    line-height 1.2em
    height 6.6em
  
// select
select[multiple]
select[size]
  +fd()
    height auto
 
// fondant style radio and checkbox
input[type="radio"]
input[type="checkbox"]
  &.fd.option
  .fd.option > &
  .fd > .option > &
  .fd > &.option
    display none
input[type="radio"]
input[type="checkbox"]
  &.fd.option
  .fd.option > &
  .fd > .option > &
  .fd > &.option
    & + label
      @extend input[type="checkbox"].fd
      display inline
      position relative
      height 1em
      line-height 1em
      padding 0 0 0 1.4em
      &:before
        width 1.2em
        height 1.2em
        position absolute
        left 0
        top 0
        line-height 1em
        text-align center
        background base-white
        transition background-color .3s ease
        box-sizing border-box
        border-width .1em
        border-style solid
        box-shadow inset 0 .1em .2em 0 rgba(dark-black, .3), 0 .1em 0 0 rgba(base-white, .8)
    & + label.after
      padding 0 1.4em 0 0
      &:before
        right 0
        left inherit
  .fd.after.option > &
  .fd > .option.after > &
    & + label
      @extend input[type="radio"].fd.option + label.after
  .fd > & + label.after
      @extend input[type="radio"].fd.option + label.after
input[type="radio"]
  &.fd.option
  .fd.option > &
  .fd > .option > &
  .fd > &.option
    & + label:before 
      border-radius 50%
      content ' '
    &:checked + label:before
      content '\2022'
input[type="checkbox"]
  &.fd.option
  .fd.option > &
  .fd > .option > &
  .fd > &.option
    & + label:before 
      border-radius .2rem
      content ' '
    &:checked + label:before
      content '\2713'

label.option
  +fd()
    input[type="radio"]
    input[type="checkbox"]
      & + span
        @extend input[type="radio"].fd.option + label
    input[type="radio"]
      & + span:before
        @extend input[type="radio"].fd.option + label:before
      &:checked + span:before
        @extend input[type="radio"].fd.option:checked + label:before
    input[type="checkbox"]
      & + span:before
        @extend input[type="checkbox"].fd.option + label:before
      &:checked + span:before
        @extend input[type="checkbox"].fd.option:checked + label:before
label.option.after
  +fd()
    input[type="radio"]
    input[type="checkbox"]
      & + span
        @extend input[type="radio"].fd.option + label.after
label.fd.option
  colorful(input-before-colorful)

// switch
label.switch
  +fd()
    display inline-block
    position relative
    border-width 1px
    border-style solid
    border-radius .2rem
    box-sizing border-box
    font-family: "Courier New", Courier, "Heiti SC", "Microsoft YaHei", monospace;
    colorful(switch-colorful)
    > 
      input[type="checkbox"]
        display none
        ~
          *
            padding .2em .4em
            height 1em
            text-align center
            user-select none
            &:before
              margin-left 0
          :empty
            display inline-block
            min-width 2em
label.slider
  +fd()
    @extend label.switch.fd

label.switch
  +fd()
    > input[type="checkbox"]
      ~ 
        :empty:after
          content "OFF"
        .on
          display none
        .off
          display inline-block
      &:checked ~ 
        :empty:after
          content "ON"
        .on
          display inline-block
        .off
          display none
    &:lang(zh)
      > input[type="checkbox"]
        ~ :empty:after
          content "\5df2\5f00"
        &:checked ~ :empty:after
          content "\5df2\5173"
label.slider
  +fd()
    > input[type="checkbox"]
      ~
        *
          display block
        .on
          float left
          &:empty:after
            content "ON"
        .off
          float right
          &:empty:after
            content "OFF"
        .on:before
          content " "
          width 50%
          height 1.4em
          border-width 1px
          border-style solid
          border-radius .2rem
          position absolute
          box-sizing border-box
          top 0
          left 0
          transition all .2s ease-out
      &:checked ~ .on:before
        left 50%
  &:lang(zh)
    > input[type="checkbox"]
      ~ 
        .on:empty:after
          content "\5df2\5f00"
        .off:empty:after
          content "\5df2\5173"
  colorful(slider-colorful)

// icon for input
+icon-class('.inside')
  +fd()
    position relative
    &:before
      position absolute
      left 0
      top .5em
    > input
      padding-left 1.8em !important
    &.after
      &:after
        margin-left -2.1em
      > input
        padding-left .4em !important
        padding-right 1.8em !important

.group
  +fd()
    display inline-block
    vertical-align middle
    white-space nowrap
    >
      *
        float left
        &:not(input)
          border 1px solid dark-gray
          display block
          min-width 1em
          padding .5em .4em
          text-align center
          text-shadow 0 1px 0 base-white
          height 2em
          line-height 1em
          box-sizing border-box
          vertical-align middle
        &:first-child
          border-top-left-radius .2rem
          border-bottom-left-radius .2rem
          & ~ *
            border-left none
        &:last-child
          border-top-right-radius .2rem
          border-bottom-right-radius .2rem
        > input
          &[type="radio"]
          &[type="checkbox"]
            margin 0 .1em .1em .1em
            vertical-align middle
      input
        @extend input:not([type="button"]).fd
        @extend input[type="text"].fd
        border-radius 0
    colorful(group-colorful)
    widths(\&, '> input:not([type="button"]):not([type="radio"]):not([type="checkbox"]):not([type="file"])', 0, 5, 3, em)
